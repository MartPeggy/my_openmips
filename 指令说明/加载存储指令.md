# 加载存储指令

#### 加载指令

- **lb**  从内存中指定地址读取一个字节保存到寄存器中
  - 指令用法：*lb rt,offset(base)*
  - 指令作用：从内存中的指定地址处读取一个字节，符号扩展至32位后保存到rt寄存器中

- **lbu**  从内存中指定地址读取一个字节保存到寄存器中
  - 指令用法：*lbu rt,offset(base)*
  - 指令作用：从内存中的指定地址处读取一个字节，无符号扩展至32位后保存到rt寄存器中

- **lh** 从内存中指定地址读取半个字节保存到寄存器中
  - 指令用法：*lh rt,offset(base)*
  - 指令作用：从内存中读取一个半字，符号扩展至32位后保存到rt寄存器中
- **lhu** 从内存中指定地址读取半个字节保存到寄存器中
  - 指令用法：*lhu rt,offset(base)*
  - 指令作用：从内存中读取一个半字，无符号扩展至32位后保存到rt寄存器中
- **lw** 从内存中指定地址读取一个字保存到寄存器中
  - 指令用法：*lw rt,offset(base)*
  - 指令作用：从内存中读取一个字保存到rt寄存器中

#### 存储指令

- **sb** 将寄存器的最低字节存储到内存中的指定地址
  - 指令用法：*sb rt,offset(base)*
  - 指令作用：将地址为rt的通用寄存器的最低字节存储到内存中的指定位置
- **sh** 将寄存器的最低两个字节存储到内存中的指定地址
  - 指令用法：*sh rt,offset(base)*
  - 指令作用：将地址为rt的通用寄存器的最低两个字节存储到内存中的指定位置
- **sw** 将寄存器的字存储到内存中的指定地址
  - 指令用法：*sw rt,offset(base)*
  - 指令作用：将地址为rt的通用寄存器的字存储到内存中的指定位置

#### 大/小端模式

- **大端模式：高位字节存放在低地址中，低位字节存放在高地址中**

  存入 **0x12345678 ** 为例：

  | 地址 | 0x00000001 | 0x00000002 | 0x00000003 | 0x00000004 |
  | :--: | :--------: | :--------: | :--------: | :--------: |
  | 数据 |    0x12    |    0x34    |    0x56    |    0x78    |

- **小端模式：高位字节存放在高地址中，低位字节存放在低地址中**

  存入 **0x12345678** 为例：
  | 地址 | 0x00000001 | 0x00000002 | 0x00000003 | 0x00000004 |
  | :--: | :--------: | :--------: | :--------: | :--------: |
  | 数据 |    0x78    |    0x56    |    0x34    |    0x12    |
#### 字，半字，字节

- 以如下内存举例

  | 0x50 | 0x51 | 0x52 | 0x53 |
  | ---- | ---- | ---- | ---- |
  | 0x81 | 0x82 | 0x83 | 0x84 |

- **一个字节** 即 0x81，无符号扩展至32位 0x00000081，符号扩展至32位 0xffffff81

- **一个半字** 即 0x8182，无符号扩展至32位 0x00008182，符号扩展至32位 0xffff8182

- **一个字** 即 0x81828384


#### 无符号扩展/符号扩展

| 16位立即数 |   0x8000   |   0x1000   |
| :--------: | :--------: | :--------: |
|  符号扩展  | 0xFFFF8000 | 0x00001000 |
| 无符号扩展 | 0x00008000 | 0x00001000 |

#### 非对齐加载指令

- **lwr** 非对齐加载指令，向右加载

  -  指令用法为：*lwr rt, offset(base)*
  -  指令作用为：从内存中指定的加载地址处，加载一个字的最低有效部分

- **lwl** 非对齐加载指令，向左加载

  - 指令用法为：*lwl rt, offset(base)*
  - 指令作用为：从内存中指定的加载地址处，加载一个字的最高有效部分

-  举例如下：

  | 地址 | 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   | 11   |
  | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
  | 数据 | x0   | x1   | x2   | x3   | x4   | x5   | x6   | x7   | x8   | x9   | x10  | x11  |

    使用指令：

  ```assembly
  lwl $1, 7($0)
  lwr $1,10($0)
  ```

  执行指令前的$1 

  | e    | f    | g    | h    |
  | ---- | ---- | ---- | ---- |

  执行lwl指令后的$1

  | <u>**x7**</u> | f    | g    | h    |
  | ------------- | ---- | ---- | ---- |

  执行lwr指令后的$1

  | x7   | <u>x8</u> | <u>x9</u> | <u>x10</u> |
  | ---- | --------- | --------- | ---------- |

#### 非对齐存储指令



